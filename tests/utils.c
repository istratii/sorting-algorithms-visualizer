
#include "utils.h"

#define SIZE 42

#define CHECK(Ref, Out, Size, Sort, Comparator, Check, Debug, Status)                              \
  memcpy(Out, Ref, Size * sizeof(int));                                                            \
  Sort(Out, Size, Comparator);                                                                     \
  if (!Check(Out, Size))                                                                           \
  {                                                                                                \
    Debug(Out, Size);                                                                              \
    Status = 0;                                                                                    \
  }

static int N[SIZE][SIZE] = {
  { 612, 717, 478, 445, 540, 633, 263, 630, 69,  816, 774, 750, 573, 415,
    803, 880, 35,  276, 233, 280, 315, 912, 747, 372, 675, 17,  459, 574,
    355, 221, 324, 343, 547, 965, 913, 374, 268, 153, 386, 594, 189, 170 },
  { 137, 372, 820, 892, 337, 916, 760, 721, 387, 729, 157, 641, 153, 785,
    239, 35,  495, 387, 461, 112, 523, 235, 564, 607, 877, 264, 987, 184,
    202, 425, 415, 712, 752, 326, 833, 658, 46,  519, 241, 629, 892, 334 },
  { 514, 970, 756, 586, 867, 377, 770, 218, 254, 274, 359, 147, 695, 450,
    480, 236, 142, 163, 345, 813, 317, 399, 772, 136, 371, 909, 393, 117,
    354, 125, 310, 380, 304, 576, 68,  998, 509, 331, 25,  772, 90,  238 },
  { 769, 641, 804, 686, 915, 252, 414, 730, 177, 476, 509, 562, 51,  860,
    494, 409, 475, 54,  93,  799, 92,  349, 503, 703, 340, 747, 802, 646,
    852, 971, 237, 816, 153, 349, 5,   974, 536, 769, 209, 992, 668, 854 },
  { 502, 648, 335, 581, 41,  223, 949, 777, 700, 84,  10,  564, 552, 560,
    142, 506, 372, 635, 563, 205, 550, 464, 191, 898, 739, 142, 732, 237,
    745, 596, 598, 979, 691, 177, 62,  81,  318, 530, 369, 495, 548, 97 },
  { 411, 613, 81,  54,  194, 526, 352, 554, 903, 214, 397, 820, 302, 287,
    685, 548, 62,  743, 69,  703, 773, 2,   610, 503, 51,  407, 423, 402,
    711, 944, 180, 968, 472, 388, 469, 779, 135, 909, 64,  226, 294, 427 },
  { 773, 601, 274, 654, 675, 828, 115, 605, 488, 313, 93,  778, 671, 64,
    952, 106, 556, 419, 470, 734, 224, 505, 976, 763, 64,  801, 915, 191,
    626, 862, 134, 514, 351, 985, 62,  936, 81,  350, 951, 948, 272, 845 },
  { 927, 10,  464, 419, 795, 708, 799, 424, 51,  887, 247, 311, 426, 861,
    956, 818, 774, 32,  67,  185, 146, 482, 412, 13,  645, 881, 861, 51,
    263, 318, 978, 461, 250, 903, 77,  23,  625, 142, 612, 666, 121, 893 },
  { 435, 439, 413, 44,  212, 622, 519, 249, 439, 618, 322, 713, 781, 85,
    527, 46,  457, 363, 948, 724, 767, 235, 917, 312, 737, 986, 108, 544,
    48,  755, 518, 126, 499, 399, 902, 366, 579, 344, 270, 687, 559, 266 },
  { 917, 60,  978, 846, 523, 598, 806, 440, 371, 521, 336, 880, 470, 175,
    545, 445, 680, 571, 709, 205, 452, 85,  449, 989, 666, 99,  836, 856,
    355, 7,   676, 929, 591, 57,  667, 579, 762, 986, 952, 550, 527, 167 },
  { 995, 671, 343, 253, 933, 210, 365, 661, 412, 746, 742, 628, 440, 40,
    99,  71,  273, 175, 944, 815, 236, 349, 33,  693, 318, 217, 260, 609,
    265, 472, 124, 241, 302, 887, 659, 274, 619, 496, 841, 713, 633, 750 },
  { 83,  411, 179, 257, 91,  494, 116, 925, 287, 199, 120, 470, 176, 661,
    84,  307, 32,  202, 428, 827, 723, 419, 701, 250, 844, 187, 809, 713,
    267, 681, 257, 299, 991, 101, 635, 950, 438, 297, 199, 313, 542, 374 },
  { 912, 113, 70,  35,  999, 700, 496, 39,  662, 256, 334, 214, 322, 207,
    364, 289, 370, 430, 435, 706, 299, 204, 360, 141, 296, 700, 530, 826,
    160, 265, 689, 305, 325, 789, 697, 334, 387, 361, 843, 780, 359, 439 },
  { 179, 185, 159, 953, 606, 897, 23,  203, 825, 244, 960, 360, 925, 675,
    604, 762, 498, 502, 564, 132, 582, 303, 549, 505, 694, 906, 320, 351,
    695, 568, 148, 475, 91,  537, 176, 633, 916, 161, 374, 230, 520, 936 },
  { 340, 350, 436, 125, 291, 242, 331, 289, 64,  388, 255, 753, 717, 964,
    622, 65,  452, 930, 201, 712, 905, 46,  974, 774, 459, 749, 381, 437,
    481, 910, 694, 674, 146, 336, 576, 11,  957, 744, 570, 797, 444, 44 },
  { 243, 136, 253, 781, 895, 452, 592, 170, 704, 661, 806, 689, 329, 344,
    388, 297, 72,  438, 446, 933, 255, 194, 550, 524, 907, 998, 939, 729,
    403, 279, 891, 891, 797, 614, 726, 709, 242, 780, 400, 854, 93,  422 },
  { 230, 775, 507, 109, 581, 498, 25,  610, 719, 933, 547, 567, 401, 587,
    166, 672, 520, 967, 797, 262, 278, 500, 954, 976, 991, 535, 150, 424,
    448, 156, 673, 409, 803, 13,  252, 450, 516, 990, 966, 396, 880, 787 },
  { 454, 450, 654, 987, 814, 664, 959, 981, 207, 740, 587, 397, 956, 748,
    533, 422, 87,  11,  830, 704, 902, 790, 953, 75,  157, 652, 90,  405,
    977, 172, 765, 181, 277, 316, 360, 455, 175, 802, 432, 761, 894, 885 },
  { 229, 730, 878, 811, 161, 173, 157, 649, 956, 549, 127, 464, 748, 740,
    317, 476, 736, 140, 784, 548, 970, 295, 690, 575, 518, 496, 869, 509,
    720, 363, 499, 726, 1,   174, 615, 800, 90,  156, 426, 858, 978, 389 },
  { 397, 959, 211, 795, 746, 497, 84,  759, 129, 238, 683, 354, 283, 762,
    574, 496, 793, 132, 11,  943, 465, 910, 676, 76,  498, 250, 133, 266,
    97,  763, 774, 221, 146, 54,  288, 563, 285, 145, 465, 745, 79,  2 },
  { 741, 471, 419, 41,  444, 135, 208, 280, 826, 148, 350, 728, 650, 820,
    861, 443, 33,  745, 450, 245, 992, 341, 9,   646, 878, 820, 399, 993,
    162, 811, 555, 88,  647, 495, 455, 253, 836, 41,  27,  799, 293, 145 },
  { 132, 30,  176, 279, 930, 911, 50,  666, 877, 882, 679, 787, 179, 401,
    540, 644, 53,  221, 45,  249, 19,  930, 129, 607, 570, 895, 269, 886,
    233, 413, 701, 973, 947, 27,  102, 226, 825, 470, 285, 239, 195, 870 },
  { 675, 192, 449, 736, 320, 856, 463, 387, 204, 707, 730, 120, 399, 539,
    362, 878, 71,  524, 191, 896, 591, 348, 896, 985, 899, 782, 978, 660,
    123, 716, 553, 741, 613, 968, 639, 987, 547, 136, 744, 860, 1,   975 },
  { 773, 241, 672, 622, 563, 330, 629, 847, 29,  195, 446, 529, 656, 519,
    296, 818, 422, 700, 69,  824, 482, 816, 492, 224, 387, 165, 398, 292,
    107, 36,  990, 99,  309, 904, 425, 777, 341, 82,  775, 219, 311, 664 },
  { 462, 609, 34,  240, 808, 401, 251, 351, 926, 899, 397, 139, 164, 964,
    190, 828, 706, 766, 733, 474, 472, 944, 431, 74,  375, 166, 498, 915,
    288, 777, 195, 576, 731, 166, 804, 138, 602, 851, 974, 462, 480, 798 },
  { 359, 731, 748, 926, 201, 839, 529, 789, 749, 195, 475, 779, 639, 441,
    238, 592, 903, 581, 375, 229, 166, 279, 476, 643, 364, 0,   450, 275,
    615, 422, 491, 545, 632, 73,  296, 900, 940, 186, 952, 329, 354, 189 },
  { 604, 717, 980, 521, 417, 14,  685, 708, 163, 217, 386, 214, 418, 808,
    621, 754, 214, 268, 314, 116, 838, 542, 857, 15,  904, 28,  119, 857,
    506, 92,  572, 963, 7,   525, 22,  700, 950, 749, 947, 708, 42,  599 },
  { 17,  770, 301, 176, 197, 649, 162, 425, 260, 928, 621, 578, 837, 853,
    617, 53,  496, 144, 166, 495, 516, 999, 28,  156, 320, 837, 564, 895,
    139, 130, 434, 501, 131, 575, 10,  312, 843, 270, 795, 659, 337, 560 },
  { 294, 91,  839, 963, 954, 972, 737, 256, 145, 363, 164, 341, 709, 21,
    552, 326, 694, 941, 404, 950, 353, 346, 441, 944, 121, 704, 804, 523,
    193, 762, 595, 149, 205, 454, 227, 486, 991, 508, 90,  377, 273, 538 },
  { 467, 598, 382, 896, 796, 713, 642, 503, 230, 544, 964, 207, 686, 990,
    307, 758, 123, 771, 241, 969, 428, 933, 556, 391, 123, 766, 706, 487,
    109, 584, 838, 554, 117, 264, 425, 880, 427, 926, 549, 479, 411, 246 },
  { 471, 189, 169, 362, 991, 801, 566, 386, 929, 894, 203, 444, 469, 667,
    586, 445, 577, 793, 764, 797, 243, 604, 829, 849, 295, 586, 480, 224,
    350, 765, 78,  550, 524, 104, 468, 69,  797, 878, 717, 703, 492, 327 },
  { 319, 5,   57,  741, 123, 607, 229, 505, 169, 796, 345, 752, 763, 1,
    215, 20,  757, 716, 303, 298, 436, 675, 944, 154, 159, 336, 800, 850,
    248, 223, 402, 703, 413, 788, 461, 93,  823, 262, 679, 427, 296, 593 },
  { 861, 644, 692, 569, 154, 460, 558, 303, 11,  429, 516, 969, 808, 337,
    414, 280, 89,  492, 611, 331, 608, 131, 629, 84,  383, 989, 517, 315,
    284, 358, 764, 85,  677, 319, 348, 8,   491, 452, 238, 84,  783, 415 },
  { 385, 91,  553, 795, 376, 160, 699, 366, 147, 770, 627, 549, 319, 345,
    649, 844, 805, 151, 284, 553, 365, 144, 310, 318, 132, 162, 845, 953,
    872, 343, 6,   763, 767, 811, 474, 523, 338, 453, 621, 833, 44,  625 },
  { 660, 713, 217, 415, 257, 513, 391, 110, 312, 265, 685, 513, 733, 833,
    305, 387, 961, 816, 123, 369, 606, 803, 404, 123, 152, 207, 533, 398,
    508, 971, 845, 528, 640, 712, 385, 324, 98,  761, 548, 229, 286, 18 },
  { 194, 450, 294, 219, 731, 529, 790, 839, 568, 723, 818, 638, 394, 374,
    643, 119, 418, 810, 429, 676, 806, 746, 217, 159, 718, 90,  276, 604,
    34,  720, 411, 100, 970, 206, 552, 344, 876, 741, 723, 350, 140, 70 },
  { 750, 955, 504, 324, 687, 993, 823, 606, 609, 269, 330, 308, 562, 968,
    710, 273, 349, 324, 977, 557, 914, 389, 849, 978, 976, 886, 620, 507,
    464, 332, 881, 303, 400, 928, 450, 152, 335, 805, 289, 114, 679, 689 },
  { 455, 542, 324, 883, 994, 979, 660, 182, 949, 149, 949, 637, 572, 810,
    514, 378, 536, 917, 604, 746, 566, 794, 850, 254, 535, 851, 884, 809,
    429, 208, 693, 728, 632, 655, 663, 690, 253, 41,  118, 497, 559, 769 },
  { 313, 323, 593, 750, 672, 76,  287, 235, 733, 110, 719, 378, 605, 121,
    1,   632, 2,   447, 545, 298, 36,  345, 892, 234, 687, 787, 824, 567,
    397, 164, 201, 545, 898, 716, 589, 307, 63,  788, 904, 466, 76,  261 },
  { 566, 956, 859, 676, 618, 862, 689, 171, 381, 552, 828, 754, 254, 518,
    991, 135, 422, 842, 181, 9,   911, 733, 657, 524, 912, 121, 559, 574,
    48,  997, 603, 694, 867, 549, 85,  935, 825, 724, 699, 341, 99,  621 },
  { 995, 730, 372, 161, 872, 810, 929, 224, 297, 350, 365, 55,  574, 582,
    867, 571, 122, 691, 511, 691, 978, 791, 216, 267, 112, 776, 15,  882,
    474, 830, 97,  752, 603, 460, 698, 46,  882, 680, 294, 996, 949, 901 },
  { 719, 985, 962, 677, 156, 619, 841, 688, 737, 520, 141, 96,  205, 524,
    935, 233, 744, 990, 753, 54,  260, 825, 8,   303, 933, 874, 261, 641,
    898, 171, 168, 771, 431, 53,  508, 767, 477, 345, 190, 10,  761, 653 },
};

static int __asc(int a, int b)
{
  return a - b;
}

static int __des(int a, int b)
{
  return b - a;
}

static int __check_asc(int *array, int size)
{
  for (int i = 0; i + 1 < size; ++i)
    if (array[i] > array[i + 1])
      return 0;

  return 1;
}

static int __check_des(int *array, int size)
{
  for (int i = 0; i + 1 < size; ++i)
    if (array[i] < array[i + 1])
      return 0;

  return 1;
}

static void __print_array(int *array, int size)
{
  if (size < 1)
    return;

  fprintf(stderr, "%d", array[0]);

  for (int i = 1; i < size; ++i)
    fprintf(stderr, " %d", array[i]);

  fprintf(stderr, "\n");
}

static void __debug(int *got, int size)
{
  fprintf(stderr, "Got: ");
  __print_array(got, size);
}

int check(void (*sort)(int *, int, int (*cmp)(int, int)), int mode)
{
  int ok = 1;

  for (int i = 0; i < SIZE; ++i)
  {
    int array[SIZE];

    if (PRED_ASC(mode))
    {
      CHECK(N[i], array, SIZE, sort, __asc, __check_asc, __debug, ok);
    }

    if (PRED_DES(mode))
    {
      CHECK(N[i], array, SIZE, sort, __des, __check_des, __debug, ok);
    }
  }

  return ok;
}
